"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[364],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,h=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},23:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const i={},o="Running Julia with Ion",l={unversionedId:"commands/script",id:"commands/script",title:"Running Julia with Ion",description:"Run Julia with local environment --project by default",source:"@site/docs/commands/script.md",sourceDirName:"commands",slug:"/commands/script",permalink:"/Ion/docs/commands/script",draft:!1,editUrl:"https://github.com/Roger-luo/Ion/tree/main/website/docs/docs/commands/script.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Authentication",permalink:"/Ion/docs/commands/auth"},next:{title:"Developer Notes",permalink:"/Ion/docs/category/developer-notes"}},p={},s=[{value:"Run Julia with local environment <code>--project</code> by default",id:"run-julia-with-local-environment---project-by-default",level:2},{value:"Run a standalone script with dependencies",id:"run-a-standalone-script-with-dependencies",level:2}],c={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"running-julia-with-ion"},"Running Julia with Ion"),(0,r.kt)("h2",{id:"run-julia-with-local-environment---project-by-default"},"Run Julia with local environment ",(0,r.kt)("inlineCode",{parentName:"h2"},"--project")," by default"),(0,r.kt)("p",null,"As for normal scripts, many Julia users want ",(0,r.kt)("inlineCode",{parentName:"p"},"julia --project")," to be the default, which is something I advocate too, and I have been using ",(0,r.kt)("inlineCode",{parentName:"p"},'alias jp="julia --project"')," in my terminal for years. Though this has been a safety concern for julia compiler binary, it is not a concern for a developer tool that only runs locally. So for a script without the ",(0,r.kt)("inlineCode",{parentName:"p"},"#=ion")," dependencies (introduced in next section), ",(0,r.kt)("inlineCode",{parentName:"p"},"ion run")," is equivalent to the following (and it forwards Julia compiler flags like ",(0,r.kt)("inlineCode",{parentName:"p"},"--threads")," etc. if you specify it)"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"command"),(0,r.kt)("th",{parentName:"tr",align:null},"equivalent to"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ion run")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"julia --project"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ion run script.jl")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"julia --project script.jl"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"and with shell auto-completion if you have set it up!")),(0,r.kt)("h2",{id:"run-a-standalone-script-with-dependencies"},"Run a standalone script with dependencies"),(0,r.kt)("p",null,"This is a feature that is supported in many other languages: Single-file scripts that download their dependencies. The lack of this feature has been a gripe from users in the Julia community; Ion solves this pain point with its new script system."),(0,r.kt)("p",null,"You can write the following in your Julia script"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-julia"},'# !/usr/bin/env ion run\n#=ion\nExample = "0.5"\n=#\n\nusing Pkg\nPkg.status()\n\nprintln("hello world")\n')),(0,r.kt)("p",null,"and ion will parse the ",(0,r.kt)("inlineCode",{parentName:"p"},"#=ion ...")," block to automatically setup an environment, running this will print"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"ion run script.jl\n\nStatus `~/.local/bin/env/env-3506815430/Project.toml`\n    [7876af07] Example v0.5.3\n\nhello world\n")),(0,r.kt)("p",null,"You probably want to ask why this is not a ",(0,r.kt)("inlineCode",{parentName:"p"},"Project.toml")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Manifest.toml")," embedded inside the script like Pluto notebook. Like many other similar implementations, we want this part ",(0,r.kt)("strong",{parentName:"p"},"editable and readable")," since it will directly appear in your script. Thus if you can install a package with a specific version in Julia REPL by only providing the version number and name, you should be typing the same information in your script too!"),(0,r.kt)("p",null,"We also have an alternative mode letting you specify UUID, git revision, URL, path, etc, e.g"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-julia"},'# !/usr/bin/env ion run\n#=ion\nExample = {version="0.5", url="https://github.com/Roger-luo/Example.jl"}\n=#\n\nusing Pkg\nPkg.status()\n\nprintln("hello world")\n')),(0,r.kt)("p",null,"On the other hand, there might be cases where we want a script to be never changed, which is something I'm thinking to have a release mode script environment specification that is similar to Pluto notebook that has a complete ",(0,r.kt)("inlineCode",{parentName:"p"},"Manifest.toml")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Project.toml")," inside the script."))}d.isMDXComponent=!0}}]);